<div class="money-page">
  <div class="card-wrapper">
    <div class="profile">
      <div class="avatar">M</div>
      <span class="recipient">Mickey Obama Jr.</span>
    </div>
    <div class="cards-dropdown" [class.dropdown-open]="mostrarDropdown">
      <div class="dropdown-header" (click)="toggleDropdown()">
        <div class="dropdown-title">{{ translation.COMPONENT_MONEY.PAGAR_COM }}</div>
        <div class="dropdown-arrow">â–¼</div>
      </div>
      
      <div class="dropdown-content" *ngIf="mostrarDropdown">
        <div *ngFor="let cartao of cartoes" 
             class="card-item"
             [class.selected]="cartaoSelecionado?.id === cartao.id"
             (click)="selecionarCartao(cartao)">
          <div class="card-logo">
            <div class="card-placeholder">{{ cartao.tipo.charAt(0) }}</div>
          </div>
          <div class="card-info">
            <div class="card-type">{{ cartao.tipo }}</div>
            <div class="card-number">{{ translation.COMPONENT_MONEY.TERMINANDO_EM }} {{ cartao.final }}</div>
            <button class="toggle-balance" (click)="toggleBalance(cartao, $event)">
              {{ cartao.mostrarSaldo ? translation.COMPONENT_MONEY.OCULTAR_SALDO : translation.COMPONENT_MONEY.MOSTRAR_SALDO }}
            </button>
            <div class="card-balance" *ngIf="cartao.mostrarSaldo">
              {{ translation.COMPONENT_MONEY.SALDO }}: R$ {{ cartao.saldo | number:'1.2-2' }}
            </div>
          </div>
        </div>
      </div>
      
      <button class="new-card-btn" *ngIf="mostrarDropdown" (click)="novoCartao()">
        <span>+</span> {{ translation.COMPONENT_MONEY.NOVO_CARTAO }}
      </button>
    </div>

    <div class="amount-block">
      <span class="amount-label">{{ translation.COMPONENT_MONEY.VALOR }}</span>
      
      <!-- Input para digitar o valor manualmente -->
      <div class="amount-input-container">
        <span class="currency-symbol">R$</span>
        <input type="text" 
               class="amount-input"
               [value]="valor"
               (input)="onInputChange($event)"
               placeholder="0,00"
               (blur)="formatInput()">
      </div>
      
      <input type="range" class="amount-slider" 
             [value]="valor" 
             (input)="onAmountChange($event)" 
             min="0" max="1000" step="10">
      
      <div class="amount-options">
        <div class="amount-option" 
             [class.selected]="valor === 100" 
             (click)="selecionarValor(100)">R$ 100</div>
        <div class="amount-option" 
             [class.selected]="valor === 200" 
             (click)="selecionarValor(200)">R$ 200</div>
        <div class="amount-option" 
             [class.selected]="valor === 300" 
             (click)="selecionarValor(300)">R$ 300</div>
      </div>
    </div>

    <button class="transfer-btn" (click)="transferir()">
      {{ translation.COMPONENT_MONEY.TRANSFERIR_DINHEIRO }}
    </button>

    <div *ngIf="error" class="error-note">
      <span *ngIf="error === 'SELECT_CARTAO'">
        {{ translation.COMPONENT_MONEY.SELECIONAR_CARTAO }}
      </span>
      <span *ngIf="error === 'SELECT_VALOR'">
        {{ translation.COMPONENT_MONEY.SELECIONAR_VALOR }}
      </span>
      <span *ngIf="error === 'SALDO_INSUFICIENTE'">
        {{ translation.COMPONENT_MONEY.SALDO_INSUFICIENTE }}
      </span>
    </div>
  </div>
</div>